---
title: "PS811 Portfolio"
author: "Lisa de Sousa Dias"
output:
  html_document: 
    toc: true ## table of contents
    code_folding: hide
---
```{r setup, include=FALSE, echo=FALSE}
## Defaults for R chunks
knitr::opts_chunk$set(echo = TRUE, ## echo = TRUE means code will show
                      warning=FALSE, ## supress warnings and messages from R
                      message=FALSE,
                      fig.path='Figs/', ## where to save figures
                      fig.height = 6, ## default figure size (can differ in each chunk)
                      fig.width = 6)

## Add any R packages you require. 
## Here are some we will use in 811:
requires <- c("tidyverse", ## tidyverse includes dplyr and ggplot2
              "magrittr",
              "foreign",
              "readstata13",
              "here")

## Install any you don't have
to_install <- c(requires %in% rownames(installed.packages()) == FALSE)
install.packages(c(requires[to_install], "NA"), repos = "https://cloud.r-project.org/" )

## Load all required R packages
library(tidyverse)
library(ggplot2); theme_set(theme_minimal())
library(magrittr)
library(here)
```
<!-- The above header sets everything up. -->





<!-- Replace the below with bit about you. -->
### Research Interests

I am interested in nonviolent resistance and protest movements in sub-Sahran Africa. More specifically, I want to investigate the aftermath of protests and variation government responses and reforms. I am also interested in understanding the short and long-term consequences of violence and repression.  

### Questions I hope to answer
Do protest movements catalyze government reforms? What explains variation in how governments respond to protests? How does the use of state-sponspored violence and repression impact protest movements? 

---

### Methods
Mixed-methods. Process tracing, large-n statistical analysis, interviews, ethnogrpahy. 

---

### Relevent data
- The Social Conflict Analysis Database (SCAD) - ( [data](https://www.strausscenter.org/scad.html)]

- The Global Digital Activism Data Set (GDADS) - ( [data](https://www.icpsr.umich.edu/icpsrweb/ICPSR/studies/34625/datadocumentation))

- The Armed Conflict Location and Event Data Project (ACLED) - ( [data](https://www.acleddata.com/data/)]

- The GDELT Project - ( [data](https://www.gdeltproject.org/data.html))

<!--
Lisa, 
These datasets look like great options from which to select a few variables of interest. GDELT especially is massive, so you may want to write a separate R script that downloads your dataset of interest, selects a number of variables, and saves a smaller file in your data subfolder that this script can then call upon. 
Best,
Devin 
-->

---

### Description of Data

```{r summary of data, include = TRUE}
# d <- read.csv("~/811/data/SCAD2017Africa_Final.csv")
# Note, the above path requires that I named your repository "811" when I cloned it and that my current working directory has this folder in it. 
d <- read.csv(here("data/SCAD2017Africa_Final.csv"))

variables <- c("countryname", "eyr", "etype", "ndeath", "repress")
protests <- d[variables] # or d %<>% select(variables)

summary(protests)
glimpse(protests)
```

### Number of Protests Events in Africa 

```{r graphs for number of protest events, fig.show = 'show'}


### Number of protest events in portuguese-speaking Africa 

# protests <- read.csv("~/811/data/protests.csv")
protests <- read.csv(here("data/protests.csv"))

## Solid object names :)
portuguese_speaking_countries <- filter(protests, protests$countryname %in% c("Angola", "Mozambique", "Guinea-Bissau"))

number_events <- portuguese_speaking_countries %>% group_by(eyr) 

number_events_per_year <- number_events %>% tally()

ggplot(number_events_per_year) +
         geom_point(aes(eyr, n)) +
  labs(x = "Year", y = "Number of Protest Events", title = "Total Number of Protest Events in Portuguese-Speaking Africa", caption = "For portuguese-speaking countries in Africa, I only have data for Angola, Mozambique and Guinea-Bissau") 

### Graph for Number of Protest Events in the whole of Africa

number_events_all <- protests %>% group_by(eyr) 

number_events_per_year_all <- number_events_all %>%tally()

ggplot(number_events_per_year_all) +
  geom_point(aes(eyr, n)) +
  labs(x = "Year", y = "Number of Protest Events", title = "Total Number of Protest Events in Africa")

```
  
### Question about ggplot

Hi Devin,

I'm trying to plot a graph where I have basically the same two axes as my two graphs above (x=year, y=total number of protest events), but where I have different lines on the graph for each of the countries (I currently have a single point for all the countries combined). For example, I want to be able to look at different lines for Angola, Mozambqiue and Guinea-Bissau in the first graph. I've tried to use different combinations of the tally/filter functions, but I can't figure out how to create lines for each country.

Also, as you'll see when I knit the Rmd file, my title/caption are being cut. I've tried messing around with it but can't figure out how to change that. Is there a way to fix that? 

  
```{r protests-per-year}
d <- protests
d %>% 
  filter(countryname %in% c("Angola", "Mozambique", "Guinea-Bissau") ) %>% 
  group_by(countryname, eyr) %>% 
  tally() %>% 
ggplot( aes(x = eyr, y = n, color = countryname)) + 
  geom_point(alpha = .2) + 
  geom_smooth(se=F)

```

